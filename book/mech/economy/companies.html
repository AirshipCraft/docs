<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Companies - AirshipCraft Documentation</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../theme/pagetoc.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../index.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../../CHANGELOG.html">Changelog</a></li><li class="chapter-item expanded affix "><li class="part-title">Mechanics</li><li class="chapter-item expanded "><a href="../../mech/economy.html"><strong aria-hidden="true">1.</strong> Economy</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/economy/market.html"><strong aria-hidden="true">1.1.</strong> Market</a></li><li class="chapter-item expanded "><a href="../../mech/economy/spreadsheet.html"><strong aria-hidden="true">1.2.</strong> Spreadsheet</a></li><li class="chapter-item expanded "><a href="../../mech/economy/banking.html"><strong aria-hidden="true">1.3.</strong> Banking</a></li><li class="chapter-item expanded "><a href="../../mech/economy/companies.html" class="active"><strong aria-hidden="true">1.4.</strong> Companies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/economy/companies/commands.html"><strong aria-hidden="true">1.4.1.</strong> Commands</a></li></ol></li><li class="chapter-item expanded "><a href="../../mech/economy/resources.html"><strong aria-hidden="true">1.5.</strong> Resources</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/economy/resources/crops.html"><strong aria-hidden="true">1.5.1.</strong> Crops</a></li><li class="chapter-item expanded "><a href="../../mech/economy/resources/ore.html"><strong aria-hidden="true">1.5.2.</strong> Ores</a></li></ol></li><li class="chapter-item expanded "><a href="../../mech/economy/API.html"><strong aria-hidden="true">1.6.</strong> API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/economy/api/hierarchy.html"><strong aria-hidden="true">1.6.1.</strong> Class Hierarchy</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../mech/npc.html"><strong aria-hidden="true">2.</strong> NPCs</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">2.1.</strong> Types</div></li></ol></li><li class="chapter-item expanded "><a href="../../mech/combat.html"><strong aria-hidden="true">3.</strong> Combat</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/combat/movecraft.html"><strong aria-hidden="true">3.1.</strong> Movecraft</a></li><li class="chapter-item expanded "><a href="../../mech/combat/damagetypes.html"><strong aria-hidden="true">3.2.</strong> Damage Types</a></li><li class="chapter-item expanded "><a href="../../mech/combat/artifacts.html"><strong aria-hidden="true">3.3.</strong> Artifacts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/combat/artifact-list.html"><strong aria-hidden="true">3.3.1.</strong> List of Artifacts</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../mech/skills.html"><strong aria-hidden="true">4.</strong> Skills</a></li><li class="chapter-item expanded "><a href="../../mech/cults.html"><strong aria-hidden="true">5.</strong> Cults</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/cults/objects.html"><strong aria-hidden="true">5.1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="../../mech/cults/config.html"><strong aria-hidden="true">5.2.</strong> Configuration</a></li><li class="chapter-item expanded "><a href="../../mech/cults/altars.html"><strong aria-hidden="true">5.3.</strong> Altars</a></li><li class="chapter-item expanded "><a href="../../mech/cults/shrines.html"><strong aria-hidden="true">5.4.</strong> Shrines</a></li><li class="chapter-item expanded "><a href="../../mech/cults/transmutations.html"><strong aria-hidden="true">5.5.</strong> Transmutations</a></li></ol></li><li class="chapter-item expanded "><a href="../../mech/nodes.html"><strong aria-hidden="true">6.</strong> Nodes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/nodes/territories.html"><strong aria-hidden="true">6.1.</strong> Territories</a></li><li class="chapter-item expanded "><a href="../../mech/nodes/handles-over-ids.html"><strong aria-hidden="true">6.2.</strong> Prefer Handles over IDs</a></li><li class="chapter-item expanded "><a href="../../mech/nodes/nation-system.html"><strong aria-hidden="true">6.3.</strong> Nation System</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../mech/nodes/nations/objects.html"><strong aria-hidden="true">6.3.1.</strong> Objects</a></li><li class="chapter-item expanded "><a href="../../mech/nodes/nations/permissions.html"><strong aria-hidden="true">6.3.2.</strong> Permissions</a></li><li class="chapter-item expanded "><a href="../../mech/nodes/nations/plots.html"><strong aria-hidden="true">6.3.3.</strong> Plots</a></li></ol></li><li class="chapter-item expanded "><a href="../../mech/nodes/npc-integration.html"><strong aria-hidden="true">6.4.</strong> NPC Integration</a></li></ol></li><li class="chapter-item expanded "><a href="../../mech/agriculture.html"><strong aria-hidden="true">7.</strong> Agriculture</a></li><li class="chapter-item expanded "><a href="../../mech/quests.html"><strong aria-hidden="true">8.</strong> Quests</a></li><li class="chapter-item expanded "><a href="../../mech/dungeons.html"><strong aria-hidden="true">9.</strong> Dungeons</a></li><li class="chapter-item expanded affix "><li class="part-title">Map</li><li class="chapter-item expanded "><a href="../../map/regions.html"><strong aria-hidden="true">10.</strong> Regions</a></li><li class="chapter-item expanded "><a href="../../map/cities.html"><strong aria-hidden="true">11.</strong> City States</a></li><li class="chapter-item expanded "><a href="../../map/mapoverview.html"><strong aria-hidden="true">12.</strong> Map Overview</a></li><li class="chapter-item expanded affix "><li class="part-title">Core</li><li class="chapter-item expanded "><a href="../../core/common-lib.html"><strong aria-hidden="true">13.</strong> ACCommonLib</a></li><li class="chapter-item expanded "><a href="../../core/datum.html"><strong aria-hidden="true">14.</strong> Datum</a></li><li class="chapter-item expanded "><a href="../../core/ranks.html"><strong aria-hidden="true">15.</strong> Ranks</a></li><li class="chapter-item expanded affix "><li class="part-title">General Development</li><li class="chapter-item expanded "><a href="../../administration/housekeeping.html"><strong aria-hidden="true">16.</strong> Housekeeping</a></li><li class="chapter-item expanded "><a href="../../administration/optimization.html"><strong aria-hidden="true">17.</strong> Optimization</a></li><li class="chapter-item expanded "><a href="../../administration/coding-standard.html"><strong aria-hidden="true">18.</strong> Coding Standard</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../administration/commits.html"><strong aria-hidden="true">18.1.</strong> Proper Git Commits</a></li></ol></li><li class="chapter-item expanded "><a href="../../administration/project-timeline.html"><strong aria-hidden="true">19.</strong> Project Timeline</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../administration/timeline/phase-1.html"><strong aria-hidden="true">19.1.</strong> Phase 1</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Misc</li><li class="chapter-item expanded "><a href="../../misc/lore.html"><strong aria-hidden="true">20.</strong> Lore</a></li><li class="chapter-item expanded affix "><a href="../../misc/contributions.html">Contributions</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">AirshipCraft Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <!-- Page table of contents -->
                        <div class="sidetoc"><nav class="pagetoc"></nav></div>

                        <blockquote>
<p><span style="color:red">Currently unimplemented.</span></p>
</blockquote>
<h1 id="companies"><a class="header" href="#companies">Companies</a></h1>
<blockquote>
<p>See also <a href="/src/mech/economy/companies/commands.html">Commands</a> for a full list of commands related to this page as well as aliases.</p>
</blockquote>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Companies are registerable entities that players can create, join, and manage. Companies allow players to enable profit-sharing between company owned stores as well as allowing other players, both inside and outside the company, to buy and sell stock in the company.</p>
<p>Players can only create or join one company at any time and can sell ownership of their company or transfer it to other players. CEOs (company owners) can invite other players to join their company. </p>
<p>If a player is already in a company and receives an invitation to join another company and that player accepts the invite, they will leave whatever company they are currently in and join the new company. If the invited player happens to be a CEO of a company then they will be prompted to either first transfer ownership or disband their company.</p>
<p>By introducing the concept of companies in our economy system, we can create a more diverse and dynamic in-game economy. Players can invest in companies and share in their profits, while companies can expand their reach and profitability by owning and operating in-game shops. We believe this mechanic will add a new level of depth and engagement to our server.</p>
<h2 id="registering-a-company"><a class="header" href="#registering-a-company">Registering a Company</a></h2>
<p>To register a company, a player must have a certain amount of money in their account. We can set a minimum amount required to register a company, such as 100,000 in-game currency. Once the player has the required amount, they can run the following command to register a company:</p>
<pre><code>/company register [company name] [ticker symbol] [optional: # of shares]
</code></pre>
<p>This command will create a new company with the specified name and ticker symbol and set the player as the owner, or CEO. The company's information will be stored in a separate database table from the player's information.</p>
<p>Notice the optional third argument which is the amount of shares offered as an initial public offering (IPO). Players can set whatever amount of shares they would like but the default value will always be 100,000.</p>
<p>In-order to maintain a company, a daily upkeep of <code>100 x 0.75(amount of members)</code> will be withdrawn out of the company's bank. To check the balance of the company, you can do the following command:</p>
<pre><code>/company bank
</code></pre>
<p>A company must also be registered to a physical location on the map. The physical location of the company is that company's <a href="/src/mech/nodes/nations/plots.html">HQ</a> and it will determine the income tax rate come payday. CEOs must either purchase a plot from a nation or be given a plot by a nation leader. </p>
<p>You may also claim plots in the wilderness at a default cost. This allows for trade companies to be autonomous and to avoid paying income tax. Normal tax rates still apply to transactions done at any of the company owned markets. </p>
<p>A company must also have a physical bank <a href="/src/mech/economy/banking.html">vault</a>.</p>
<blockquote>
<p>See: <a href="/src/mech/nodes/nations/plots.html">Plots</a>, <a href="/src/mech/nodes/nations/objects.html">Objects</a>, <a href="/src/mech/economy/market.html">Market</a> and <a href="/src/mech/economy/banking.html">Banking</a></p>
</blockquote>
<h2 id="company-owned-shops-and-profit-sharing"><a class="header" href="#company-owned-shops-and-profit-sharing">Company Owned Shops and Profit Sharing</a></h2>
<p>Once a company is registered, any shops registered to any of its members will automatically be registered to the company. </p>
<p>Revenue generated by the shops will be then deposited into the corporation <a href="/src/mech/economy/banking.html"><code>bank</code></a>. </p>
<p>There will be a &quot;payday&quot; daily and a percentage (90% by default) of the total contents of the corporation bank will be distributed equally among the members of the corporation. The CEO of the company can configure this percentage by running the following command:</p>
<pre><code>/company payout [percentage]
</code></pre>
<p>The CEO can also withdraw the balance of the corporation bank at any time by running this command:</p>
<pre><code>/company withdraw [amount]
</code></pre>
<p>The plugin will also keep track of the highest money makers within the company which can be viewed by running the command:</p>
<pre><code>/company top [company name]
</code></pre>
<p>This will show which member of the company is bringing in the most revenue through the shops registered to them.</p>
<p>In the event that a member of the company who has shops registered to them is removed from the company, their shops are then unregistered from the company as well.</p>
<h2 id="stock-market"><a class="header" href="#stock-market">Stock Market</a></h2>
<p>Companies have stock value that is determined by how well that company performs based on the following metrics:</p>
<ol>
<li>Size of the company: the amount of shops registered to the company.</li>
<li>Daily revenue of the company: the total daily sum of the revenue made by the company through the buying and selling of goods via shops.</li>
<li>Amount of shares available for purchase: As with the real world stock market, supply and demand plays a big role in determining the price of a stock.</li>
</ol>
<p>Each company by default starts with 100,000 shares available to be bought. Anyone can purchase these stocks including company members. The starting price of a stock is </p>
<h3 id="buying-and-selling-stocks"><a class="header" href="#buying-and-selling-stocks">Buying and Selling Stocks</a></h3>
<h4 id="buying"><a class="header" href="#buying"><em><strong>Buying</strong></em></a></h4>
<p>There are two ways for players to purchase stock in a company: <code>buy limit orders</code> and <code>buy stop orders</code>. </p>
<p>Buy limit orders are located below current price meaning they are filled at a designated price or better. Buy limit orders are designed for precision.</p>
<p>Buy stop orders are located above current price meaning they are filled at the best available market price. Buy stop orders are intended to enter or exit the market immediately upon being elected.</p>
<p><img src="../../images/buy-limit-stop-graph.jpeg" alt="buy limit vs buy stop" /></p>
<p>Players can place buy stop orders for stocks in registered companies using the following command:</p>
<pre><code>/company buy [ticker symbol] [amount]
</code></pre>
<p>This command will purchase that amount of available shares at whatever asking price is available.</p>
<p>To place a limit buy order, you must use the following command:</p>
<pre><code>/company limitbuy [ticker symbol] [amount] [limit price]
</code></pre>
<p>In this command we have the <code>limit price</code> which will set the target price for shares to be bought either at that price or lower  in-order to fill the limit buy order.</p>
<h4 id="selling"><a class="header" href="#selling"><em><strong>Selling</strong></em></a></h4>
<p>Just like with buy orders, there are <code>sell limit orders</code> and <code>sell stop orders</code> as well as an additional third type which are <code>stop limit orders</code>.</p>
<p>A sell limit is a pending order used to sell at the limit price or higher while a sell stop, which is also a pending order, is used to sell at the stop price or lower. </p>
<p>Sell limit is used to guarantee a profit by selling above the market price and sell stop is used to minimize loss by selling at the stop price.</p>
<p><img src="../../images/sell-limit-stop-graph.jpeg" alt="sell limit vs sell stop" /></p>
<p>Players can place sell stop orders for stocks they own by executing the following command:</p>
<pre><code>/company sell [ticker symbol] [amount]
</code></pre>
<p>The amount parameter is the number of stocks the player wants to sell. By putting &quot;all&quot; instead of a number will place an order to sell all owned shares at the highest available bid price. </p>
<p>To place a limit sell order, you can use the following command:</p>
<pre><code>/company limitsell [ticker symbol] [amount] [limit price]
</code></pre>
<p>Much like setting a buy limit order, the <code>limit price</code> parameter will set the asking price for the shares and will attempt to sell whatever specified amount of shares of a stock at that asking price or higher. </p>
<p>There is a third action which is the <code>stop limit order</code>. </p>
<blockquote>
<p>A stop-limit order is a conditional trade over a set time frame that combines the features of stop with those of a limit order and is used to mitigate risk. It is related to other order types, including limit orders (an order to either buy or sell a specified number of shares at a given price or better) and stop-on-quote orders (an order to either buy or sell a security after its price has surpassed a specified point).</p>
<ul>
<li><a href="https://www.investopedia.com/terms/s/stop-limitorder.asp#What%20Is%20A%20Stop-Limit%20Order?">Investopedia</a></li>
</ul>
</blockquote>
<p><img src="../../images/stop-limit-order.webp" alt="stop limit order" /></p>
<p>To place a <code>stop limit order</code> one may execute the following command:</p>
<pre><code>/company stoplimitbuy [ticker symbol] [amount] [stop price] [limit price] [duration]
</code></pre>
<p>The <code>ticker symbol</code> parameter refers to the company whose stocks the player wants to purchase, <code>amount</code> is the number of shares the player wants to purchase, <code>stop price</code> is the price at which the stop order will trigger, <code>limit price</code> is the price at which the order will be executed after the stop price is triggered, and <code>duration</code> is the length of time the order will remain active. </p>
<p>For example, if a player wants to place a stop limit order for 50 shares of a company with ticker symbol <code>ABC</code> with a stop price of 10 and a limit price of 11 that will remain active for 5 minutes, they would use the following command:</p>
<pre><code>/company stoplimitbuy ABC 50 10 11 5m
</code></pre>
<p>This command would place a stop limit order to purchase 50 shares of company <code>ABC</code> at a limit price of 11, triggered when the stock reaches a price of 10, and will remain active for 5 minutes.</p>
<h3 id="npc-integration"><a class="header" href="#npc-integration">NPC Integration</a></h3>
<h2 id="technical-overview"><a class="header" href="#technical-overview">Technical Overview</a></h2>
<p>To begin with, we'll need to create a new entity class called <code>Company</code>. This class will have attributes such as <code>name</code>, <code>owner</code>, <code>stockPrice</code>, <code>totalStock</code>, <code>sharesSold</code>, <code>shops</code>, and <code>profits</code>. The <code>shops</code> attribute will be a list of all the shops owned by the company, and the <code>profits</code> attribute will be a map that associates each shop with its current profit.</p>
<pre><code class="language-java">public class Company {
    private String name;
    private UUID owner;
    private double stockPrice;
    private int totalStock;
    private int sharesSold;
    private List&lt;Shop&gt; shops;
    private Map&lt;Shop, Double&gt; profits;
    
    // constructor, getters, and setters
}
</code></pre>
<p>Next, we'll need to create methods for registering a new company, purchasing stock in a company, and sharing profits from company-owned shops. </p>
<pre><code class="language-java">public class CompanyManager {
    private List&lt;Company&gt; companies = new ArrayList&lt;&gt;();

    public void registerCompany(String name, UUID owner, double stockPrice, int totalStock) {
        Company company = new Company(name, owner, stockPrice, totalStock, new ArrayList&lt;&gt;(), new HashMap&lt;&gt;());
        companies.add(company);
    }
    
    public void purchaseStock(Player player, Company company, int numShares) {
        double cost = numShares * company.getStockPrice();
        if (player.getBalance() &gt;= cost &amp;&amp; company.getSharesSold() + numShares &lt;= company.getTotalStock()) {
            player.withdraw(cost);
            company.setSharesSold(company.getSharesSold() + numShares);
            double ownership = numShares / (double) company.getTotalStock();
            company.getOwners().put(player.getUniqueId(), ownership);
        }
    }
    
    public void shareProfits() {
        for (Company company : companies) {
            for (Shop shop : company.getShops()) {
                double revenue = shop.getRevenue();
                double profit = revenue - shop.getCost();
                company.getProfits().put(shop, profit);
            }
            double totalProfit = company.getProfits().values().stream().mapToDouble(Double::doubleValue).sum();
            for (Map.Entry&lt;UUID, Double&gt; entry : company.getOwners().entrySet()) {
                Player player = Bukkit.getPlayer(entry.getKey());
                if (player != null) {
                    double share = entry.getValue() * totalProfit;
                    player.deposit(share);
                }
            }
        }
    }
}
</code></pre>
<p>Finally, we'll need to hook into the main <a href="/src/mech/economy/market.html">market</a> plugin to make sure that company-owned shops are treated the same way as player-made shops. We can do this by adding a listener that listens for when a shop is created, and then adding that shop to the corresponding company's <code>shops</code> list.</p>
<pre><code class="language-java">public class ShopListener implements Listener {
    private EconomySystem economySystem;

    public ShopListener(EconomySystem economySystem) {
        this.economySystem = economySystem;
    }

    @EventHandler
    public void onShopCreate(ShopCreateEvent event) {
        Player player = event.getPlayer();
        Shop shop = event.getShop();
        for (Company company : economySystem.getCompanies()) {
            if (company.getOwner().equals(player.getUniqueId())) {
                company.getShops().add(shop);
            }
        }
    }
}
</code></pre>
<p>The design for the stock market looks good so far! Here are a few suggestions to add more details:</p>
<h3 id="stock-value-calculation"><a class="header" href="#stock-value-calculation">Stock Value Calculation</a></h3>
<p>The stock value of a company can be calculated using the following formula:</p>
<p>$$ \text{Stock Value} = \frac{\text{Weekly Revenue}}{\text{Size of the Company}} \times 1000 $$</p>
<p>The resulting stock value is multiplied by 1000 to make it a more manageable number. This formula takes into account both the size of the company (which can be an indication of its stability) and its weekly revenue (which can indicate its growth potential). The stock value can be updated on a daily or weekly basis.</p>
<h3 id="market-order-types"><a class="header" href="#market-order-types">Market Order Types</a></h3>
<p>In addition to the <code>buy stop</code> and <code>buy limit</code> orders, we can also provide other order types to give players more control over their trades:</p>
<ul>
<li><code>sell limit</code>: This order type allows players to sell their shares at a designated price or better.</li>
<li><code>sell stop</code>: This order type allows players to sell their shares at the best available market price once the price drops below a certain point.</li>
<li><code>stop-limit</code>: This order type combines the <code>stop</code> and <code>limit</code> orders. The player sets a stop price and a limit price, and the order will only be executed if the stop price is reached, and the limit price can be met.</li>
</ul>
<h3 id="stock-market-data"><a class="header" href="#stock-market-data">Stock Market Data</a></h3>
<p>We can also provide additional data to players who are interested in tracking the performance of the stock market. For example, we can keep track of the following:</p>
<ul>
<li>Highest performing stocks: We can provide a list of the stocks that have had the highest percentage increase in value over a certain time period (e.g., last week, last month, last quarter).</li>
<li>Most active stocks: We can provide a list of the stocks that have had the highest volume of trades over a certain time period.</li>
<li>Market trends: We can provide a graph or chart that shows the overall trend of the stock market over time. This can help players to make informed decisions about when to buy or sell their stocks.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../mech/economy/banking.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../mech/economy/companies/commands.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../mech/economy/banking.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../mech/economy/companies/commands.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../../theme/pagetoc.js"></script>


    </body>
</html>
